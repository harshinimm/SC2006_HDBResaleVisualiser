{"ast":null,"code":"var _jsxFileName = \"D:\\\\SC2006\\\\SC2006\\\\SC2006_HDBResaleVisualiser\\\\HDBResaleVisualiser_App\\\\sc2006_project\\\\src\\\\pages\\\\Insights.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport Navbar from \"../homepage/Navbar\";\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from \"chart.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\nconst districts = [\"Ang Mo Kio\", \"Bedok\", \"Bishan\", \"Bukit Batok\", \"Bukit Merah\", \"Bukit Panjang\", \"Central Area\", \"Choa Chu Kang\", \"Clementi\", \"Geylang\", \"Hougang\", \"Jurong East\", \"Jurong West\", \"Kallang/Whampoa\", \"Marine Parade\", \"Pasir Ris\", \"Punggol\", \"Queenstown\", \"Sembawang\", \"Sengkang\", \"Serangoon\", \"Tampines\", \"Toa Payoh\", \"Woodlands\", \"Yishun\"];\nconst Insights = () => {\n  _s();\n  var _predictions$price, _predictions, _predictions$year, _predictions2;\n  const [selectedDistrict, setSelectedDistrict] = useState(\"Woodlands\");\n  const [historical, setHistorical] = useState([]);\n  const [predictions, setPredictions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    console.log(\"üèôÔ∏è District changed:\", selectedDistrict); // ‚úÖ Add this\n    setLoading(true);\n    const fetchData = async () => {\n      try {\n        const histRes = await fetch(`/api/resale/resale_analysis/?towns=${selectedDistrict.toUpperCase()}&type=price_trends`);\n        const townParam = encodeURIComponent(selectedDistrict.toUpperCase());\n        const typeParam = encodeURIComponent(\"3 ROOM\");\n        const predRes = await fetch(`/api/resale/ai_predict/?town=${townParam}&flat_type=${typeParam}`);\n        // üß† Check both responses before trying .json()\n        if (!histRes.ok || !predRes.ok) {\n          const errMsg = `Resale or prediction fetch failed: ${histRes.status} / ${predRes.status}`;\n          console.error(\"‚ùå API fetch failed:\", errMsg);\n          throw new Error(errMsg);\n        }\n        const histData = await histRes.json();\n        const predData = await predRes.json();\n        console.log(\"‚úÖ Prediction data from API:\", predData);\n        const hist = [];\n        if (Array.isArray(histData)) {\n          const yearGroups = {};\n          histData.forEach(item => {\n            var _ref, _item$resale_price;\n            const year = item.year;\n            const price = (_ref = (_item$resale_price = item.resale_price) !== null && _item$resale_price !== void 0 ? _item$resale_price : item.avg_price) !== null && _ref !== void 0 ? _ref : 0;\n            if (!yearGroups[year]) {\n              yearGroups[year] = {\n                total: 0,\n                count: 0\n              };\n            }\n            yearGroups[year].total += price;\n            yearGroups[year].count += 1;\n          });\n          for (const [year, data] of Object.entries(yearGroups)) {\n            hist.push({\n              year: Number(year),\n              price: Math.round(data.total / data.count)\n            });\n          }\n          hist.sort((a, b) => a.year - b.year); // Ensure chronological order\n        }\n        const future = Array.isArray(predData === null || predData === void 0 ? void 0 : predData.predictions) ? predData.predictions.map(p => ({\n          year: p.year,\n          price: Math.round(p.predicted_price)\n        })) : [];\n        setHistorical(hist);\n        setPredictions(future);\n      } catch (error) {\n        console.error(\"Fetch error:\", error);\n        setHistorical([]);\n        setPredictions([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [selectedDistrict]);\n  const allData = [...historical, ...predictions];\n  const labels = allData.map(d => d.year);\n  const lastPrediction = (_predictions$price = (_predictions = predictions[predictions.length - 1]) === null || _predictions === void 0 ? void 0 : _predictions.price) !== null && _predictions$price !== void 0 ? _predictions$price : 0;\n  const lineChartData = {\n    labels,\n    datasets: [{\n      label: `Historical Prices in ${selectedDistrict}`,\n      data: historical.map(d => d.price),\n      borderColor: \"#1F77B4\",\n      backgroundColor: \"rgba(31, 119, 180, 0.2)\",\n      borderWidth: 2,\n      pointRadius: 4,\n      pointBackgroundColor: \"#1F77B4\",\n      tension: 0.3\n    }, {\n      label: `Predicted Prices in ${selectedDistrict}`,\n      data: predictions.map(d => d.price),\n      borderColor: \"#D72638\",\n      backgroundColor: \"rgba(215, 38, 56, 0.2)\",\n      borderWidth: 2,\n      pointRadius: 4,\n      pointBackgroundColor: \"#D72638\",\n      borderDash: [6, 4],\n      tension: 0.3\n    }]\n  };\n  const priceDifference = historical.length > 1 ? historical[historical.length - 1].price - historical[0].price : 0;\n  const trendMessage = historical.length > 0 ? priceDifference > 0 ? `üìà Prices in ${selectedDistrict} have increased by $${priceDifference.toLocaleString()} since ${historical[0].year}.` : `üìâ Prices in ${selectedDistrict} have decreased by $${Math.abs(priceDifference).toLocaleString()} since ${historical[0].year}.` : `No historical data available for ${selectedDistrict}.`;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 text-red-900\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-5xl mx-auto mt-12 px-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-5xl font-extrabold text-center mb-8 text-red-700\",\n        children: \"\\uD83D\\uDCCA AI-Powered Insights & Trends\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-lg font-semibold mr-3\",\n          children: \"Choose a District:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedDistrict,\n          onChange: e => setSelectedDistrict(e.target.value),\n          className: \"border px-4 py-2 rounded-lg bg-white shadow-sm\",\n          children: districts.map((district, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: district,\n            children: district\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-8 shadow-lg rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold mb-6 text-red-700\",\n          children: \"\\uD83D\\uDCC9 Resale Price Trend\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-80\",\n          children: loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center text-gray-500\",\n            children: \"Loading chart...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(Line, {\n            data: lineChartData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8 bg-white p-8 shadow-lg rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold mb-4 text-purple-700\",\n          children: \"\\uD83E\\uDD16 AI-Powered Prediction\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg text-gray-800\",\n          children: [\"\\uD83D\\uDCCD \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [\"Estimated \", (_predictions$year = (_predictions2 = predictions[predictions.length - 1]) === null || _predictions2 === void 0 ? void 0 : _predictions2.year) !== null && _predictions$year !== void 0 ? _predictions$year : \"N/A\", \" Resale Price:\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 16\n          }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-green-600 font-bold text-2xl\",\n            children: [\"$\", lastPrediction.toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-700 mt-3 text-lg\",\n          children: [\"Based on trends, prices in \", selectedDistrict, \" are projected to rise steadily.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-8 shadow-lg rounded-lg mt-8 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold mb-4 text-blue-700\",\n          children: \"\\uD83D\\uDCCA Market Trend\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: `text-xl font-semibold ${priceDifference > 0 ? \"text-green-600\" : \"text-red-600\"}`,\n          children: trendMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n};\n_s(Insights, \"JGI2/m9KoRVp9kiOWhr7jvq+uno=\");\n_c = Insights;\nexport default Insights;\nvar _c;\n$RefreshReg$(_c, \"Insights\");","map":{"version":3,"names":["React","useEffect","useState","Line","Navbar","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","jsxDEV","_jsxDEV","register","districts","Insights","_s","_predictions$price","_predictions","_predictions$year","_predictions2","selectedDistrict","setSelectedDistrict","historical","setHistorical","predictions","setPredictions","loading","setLoading","console","log","fetchData","histRes","fetch","toUpperCase","townParam","encodeURIComponent","typeParam","predRes","ok","errMsg","status","error","Error","histData","json","predData","hist","Array","isArray","yearGroups","forEach","item","_ref","_item$resale_price","year","price","resale_price","avg_price","total","count","data","Object","entries","push","Number","Math","round","sort","a","b","future","map","p","predicted_price","allData","labels","d","lastPrediction","length","lineChartData","datasets","label","borderColor","backgroundColor","borderWidth","pointRadius","pointBackgroundColor","tension","borderDash","priceDifference","trendMessage","toLocaleString","abs","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","district","index","_c","$RefreshReg$"],"sources":["D:/SC2006/SC2006/SC2006_HDBResaleVisualiser/HDBResaleVisualiser_App/sc2006_project/src/pages/Insights.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport Navbar from \"../homepage/Navbar\";\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from \"chart.js\";\r\n\r\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\r\n\r\nconst districts = [\r\n  \"Ang Mo Kio\", \"Bedok\", \"Bishan\", \"Bukit Batok\", \"Bukit Merah\", \"Bukit Panjang\", \"Central Area\", \"Choa Chu Kang\", \"Clementi\", \"Geylang\", \"Hougang\",\r\n  \"Jurong East\", \"Jurong West\", \"Kallang/Whampoa\", \"Marine Parade\", \"Pasir Ris\",\r\n  \"Punggol\", \"Queenstown\", \"Sembawang\", \"Sengkang\", \"Serangoon\", \"Tampines\",\r\n  \"Toa Payoh\", \"Woodlands\", \"Yishun\"\r\n];\r\n\r\nconst Insights = () => {\r\n  const [selectedDistrict, setSelectedDistrict] = useState(\"Woodlands\");\r\n  const [historical, setHistorical] = useState([]);\r\n  const [predictions, setPredictions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    console.log(\"üèôÔ∏è District changed:\", selectedDistrict); // ‚úÖ Add this\r\n    setLoading(true);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n          const histRes = await fetch(`/api/resale/resale_analysis/?towns=${selectedDistrict.toUpperCase()}&type=price_trends`);\r\n          const townParam = encodeURIComponent(selectedDistrict.toUpperCase());\r\n          const typeParam = encodeURIComponent(\"3 ROOM\");\r\n          const predRes = await fetch(`/api/resale/ai_predict/?town=${townParam}&flat_type=${typeParam}`);  \r\n          // üß† Check both responses before trying .json()\r\n          if (!histRes.ok || !predRes.ok) {\r\n            const errMsg = `Resale or prediction fetch failed: ${histRes.status} / ${predRes.status}`;\r\n            console.error(\"‚ùå API fetch failed:\", errMsg);\r\n            throw new Error(errMsg);\r\n          }\r\n      \r\n          const histData = await histRes.json();\r\n          const predData = await predRes.json();\r\n          console.log(\"‚úÖ Prediction data from API:\", predData);\r\n\r\n        const hist = [];\r\n\r\n        if (Array.isArray(histData)) {\r\n          const yearGroups = {};\r\n\r\n          histData.forEach(item => {\r\n            const year = item.year;\r\n            const price = item.resale_price ?? item.avg_price ?? 0;\r\n\r\n            if (!yearGroups[year]) {\r\n              yearGroups[year] = { total: 0, count: 0 };\r\n            }\r\n\r\n            yearGroups[year].total += price;\r\n            yearGroups[year].count += 1;\r\n          });\r\n\r\n          for (const [year, data] of Object.entries(yearGroups)) {\r\n            hist.push({\r\n              year: Number(year),\r\n              price: Math.round(data.total / data.count),\r\n            });\r\n          }\r\n\r\n          hist.sort((a, b) => a.year - b.year); // Ensure chronological order\r\n        }\r\n\r\n        const future = Array.isArray(predData?.predictions)\r\n          ? predData.predictions.map(p => ({\r\n              year: p.year,\r\n              price: Math.round(p.predicted_price),\r\n            }))\r\n          : [];\r\n\r\n        setHistorical(hist);\r\n        setPredictions(future);\r\n      } catch (error) {\r\n        console.error(\"Fetch error:\", error);\r\n        setHistorical([]);\r\n        setPredictions([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [selectedDistrict]);\r\n\r\n  const allData = [...historical, ...predictions];\r\n  const labels = allData.map((d) => d.year);\r\n  const lastPrediction = predictions[predictions.length - 1]?.price ?? 0;\r\n\r\n  const lineChartData = {\r\n    labels,\r\n    datasets: [\r\n      {\r\n        label: `Historical Prices in ${selectedDistrict}`,\r\n        data: historical.map(d => d.price),\r\n        borderColor: \"#1F77B4\",\r\n        backgroundColor: \"rgba(31, 119, 180, 0.2)\",\r\n        borderWidth: 2,\r\n        pointRadius: 4,\r\n        pointBackgroundColor: \"#1F77B4\",\r\n        tension: 0.3,\r\n      },\r\n      {\r\n        label: `Predicted Prices in ${selectedDistrict}`,\r\n        data: predictions.map(d => d.price),\r\n        borderColor: \"#D72638\",\r\n        backgroundColor: \"rgba(215, 38, 56, 0.2)\",\r\n        borderWidth: 2,\r\n        pointRadius: 4,\r\n        pointBackgroundColor: \"#D72638\",\r\n        borderDash: [6, 4],\r\n        tension: 0.3,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const priceDifference = historical.length > 1\r\n    ? historical[historical.length - 1].price - historical[0].price\r\n    : 0;\r\n\r\n  const trendMessage = historical.length > 0\r\n    ? (priceDifference > 0\r\n      ? `üìà Prices in ${selectedDistrict} have increased by $${priceDifference.toLocaleString()} since ${historical[0].year}.`\r\n      : `üìâ Prices in ${selectedDistrict} have decreased by $${Math.abs(priceDifference).toLocaleString()} since ${historical[0].year}.`)\r\n    : `No historical data available for ${selectedDistrict}.`;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 text-red-900\">\r\n      <Navbar />\r\n      <div className=\"max-w-5xl mx-auto mt-12 px-6\">\r\n        <h1 className=\"text-5xl font-extrabold text-center mb-8 text-red-700\">\r\n          üìä AI-Powered Insights & Trends\r\n        </h1>\r\n\r\n        {/* District Dropdown */}\r\n        <div className=\"mb-6\">\r\n          <label className=\"text-lg font-semibold mr-3\">Choose a District:</label>\r\n          <select\r\n            value={selectedDistrict}\r\n            onChange={(e) => setSelectedDistrict(e.target.value)}\r\n            className=\"border px-4 py-2 rounded-lg bg-white shadow-sm\"\r\n          >\r\n            {districts.map((district, index) => (\r\n              <option key={index} value={district}>\r\n                {district}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* Line Chart */}\r\n        <div className=\"bg-white p-8 shadow-lg rounded-lg\">\r\n          <h2 className=\"text-2xl font-bold mb-6 text-red-700\">üìâ Resale Price Trend</h2>\r\n          <div className=\"h-80\">\r\n            {loading ? (\r\n              <p className=\"text-center text-gray-500\">Loading chart...</p>\r\n            ) : (\r\n              <Line data={lineChartData} />\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* AI Prediction */}\r\n        <div className=\"mt-8 bg-white p-8 shadow-lg rounded-lg\">\r\n          <h2 className=\"text-2xl font-bold mb-4 text-purple-700\">ü§ñ AI-Powered Prediction</h2>\r\n          <p className=\"text-lg text-gray-800\">\r\n            üìç <strong>Estimated {predictions[predictions.length - 1]?.year ?? \"N/A\"} Resale Price:</strong>&nbsp;\r\n            <span className=\"text-green-600 font-bold text-2xl\">\r\n              ${lastPrediction.toLocaleString()}\r\n            </span>\r\n          </p>\r\n          <p className=\"text-gray-700 mt-3 text-lg\">\r\n            Based on trends, prices in {selectedDistrict} are projected to rise steadily.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Market Trend */}\r\n        <div className=\"bg-white p-8 shadow-lg rounded-lg mt-8 text-center\">\r\n          <h2 className=\"text-2xl font-bold mb-4 text-blue-700\">üìä Market Trend</h2>\r\n          <p className={`text-xl font-semibold ${priceDifference > 0 ? \"text-green-600\" : \"text-red-600\"}`}>\r\n            {trendMessage}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Insights;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}